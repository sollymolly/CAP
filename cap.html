<html>
    <head>
        <title>Survive in the Wilderness...</title>
        <style>
            div#left{
              border-left: 20px solid green;
              height: 622.5px;
              position: absolute;
              left: 20%;
              margin-left: -10px;
              top: 17.5
            }
            
            div#middleleftleft{
              border-left: 20px solid green;
              height: 622.5px;
              position: absolute;
              left: 32%;
              margin-left: -10px;
              top: 17.5
            }
            
            div#middleleft{
              border-left: 20px solid green;
              height: 622.5px;
              position: absolute;
              left: 44%;
              margin-left: -10px;
              top: 17.5
            }

            div#middleright{
              border-left: 20px solid green;
              height: 622.5px;
              position: absolute;
              left: 56%;
              margin-left: -10px;
              top: 17.5
            }
            
            div#middlerightright{
              border-left: 20px solid green;
              height: 622.5px;
              position: absolute;
              left: 68%;
              margin-left: -10px;
              top: 17.5
            }
            
            div#right{
              border-left: 20px solid green;
              height: 622.5px;
              position: absolute;
              left: 80%;
              margin-left: -10px;
              top: 17.5
            }
            
            
        </style>
    </head>
    <body>

            <canvas id="canvas" width="1340" height="640"></canvas>
        <script src="https://code.jquery.com/jquery-2.1.0.js"></script>
        <script src="canvasutil.js"></script>
        <div id="container">
            <div id="left"></div>
            <div id="middleleftleft"></div>
            <div id="middleleft"></div>
            <div id="middleright"></div>
            <div id="middlerightright"></div>
            <div id="right"></div>
        </div>


        <script> 
            
            
            // TODO: Complete code below
            //

            var end = false;
            var blockSize = 10;
            var widthInBlocks = width / blockSize;
            var heightInBlocks = height / blockSize;
            //Defining Score
            var score = 0;
            
            // Drawing the border
            var drawBorder = function() {
                ctx.fillStyle = "Gray";
                ctx.fillRect(0, 0, width, blockSize);
                ctx.fillRect(0, height - blockSize, width, blockSize);
                ctx.fillRect(0, 0, blockSize, height);
                ctx.fillRect(width - blockSize, 0, blockSize, height);
            };
            
            // Creating the score
            var drawscore = function() {
                ctx.font = "20px Courier";
                ctx.fillStyle = "Black";
                ctx.textAlign = "left";
                ctx.textBaseline = "top"
                // Fix the blockSize
                ctx.fillText("Score: " + score, 50, 50);
                /* let head = new Block(7, 5);
                   if (head === apple.position) {
                       score += 1;
                       appleMove = true;
                   }    
                
                
                */
            };
            
            var gameoverscore = function() {
                ctx.font = "20px Courier";
                ctx.fillStyle = "White";
                ctx.textAlign = "left";
                ctx.textBaseline = "top"
                // Fix the blockSize
                ctx.fillText("Score: " + score, 50, 50);
            }
            
            //When game is done
            var gameover = function() {
                ctx.fillStyle = "#FF0000";
                ctx.fillRect(0, 0, width, height);
                ctx.font = "60px Courier";
                ctx.fillStyle = "White";
                ctx.textAlign = "center";
                ctx.textBaseline = "middle"
                // Fix the blockSize
                
                ctx.fillText("Game over" , width / 2, height / 2);
                gameoverscore();
                end = true;
            };
            
            // Creating blocks
            var Block = function(col, row) {
                this.col = col;
                this.row = row;
                
            };
            
            //Drawing bloacks
            Block.prototype.drawSquare = function (color) {
                let x = parseInt(this.col * blockSize);
                let y = parseInt(this.row * blockSize);
                ctx.fillStyle = color;
                ctx.fillRect(x, y, blockSize, blockSize);
                //console.log(`${color}, ${x}, ${y}`);
            };
            
            Block.prototype.drawCircle = function (color) {
                let centerx = this.col * blockSize + blockSize / 2;
                let centery = this.row * blockSize + blockSize / 2;
                ctx.fillStyle = color;
                circle(centerx, centery, blockSize / 2, true);
            };
            
            Block.prototype.equal = function (other) {
                if (this.col === other.col && this.row === other.row) {
                    return true;
                }
                return false;
            }
            var block = new Block();
            //creating the snake class            
            var Snake = function() {
                this.segments = [
                    new Block(66, 55),
                    new Block(67, 55),
                    new Block(65, 56),
                    new Block(66, 56),
                    new Block(67, 56),
                    new Block(65, 57),
                    new Block(66, 57),
                    new Block(67, 57),
                    new Block(68, 57),
                    new Block(65, 58),
                    new Block(66, 58),
                    new Block(67, 58),
                    new Block(68, 58)
                ];
                
                this.direction = "right";
                this.nextDirection = "right";
            };
            
            
            
            //Drawing bloacks
            
            
            
            //Drawing the snake
            Snake.prototype.draw = function(color) {
                this.segments[0].drawSquare("Gray");
                this.segments[1].drawSquare("Gray");
                this.segments[2].drawSquare("Black");
                this.segments[3].drawSquare("Green");
                this.segments[4].drawSquare("Black");
                this.segments[5].drawSquare("Gray");
                this.segments[6].drawSquare("Black");
                this.segments[7].drawSquare("Black");
                this.segments[8].drawSquare("Green");
                this.segments[9].drawSquare("Green");
                this.segments[10].drawSquare("Green");
                this.segments[11].drawSquare("Gray");
                this.segments[12].drawSquare("Black");
            };
            
            var directions = {
                37: "left", 
                39: "right"
            };
            
            Snake.prototype.setDirection = function (newDirection) {
                console.log(newDirection);
                this.nextDirection = newDirection;
            };
            
            var pos = 0;
            
            Snake.prototype.move = function(direct) {
                let head = this.segments;
                this.direction = this.nextDirection;
                console.log(pos);
                if (end != true) {
                    if (direct === "right" && pos < 2) {
                        for (i = 0; i < head.length; i++) {
                            head[i] = new Block(head[i].col + 16.5, head[i].row);
                               
                        }
                        pos += 1;
                    } else if (direct === "left" && pos > -2) {
                        for (i = 0; i < head.length; i++) {
                            head[i] = new Block(head[i].col - 16.5, head[i].row);
                            
                        }
                        pos -= 1;
                    }
                } else {
                    
                }
//                } else if (this.direction === "up") {
//                    newHead = new Block(head.col, head.row - 1);
//                } else if (this.direction === "down") {
//                    newHead = new Block(head.col, head.row + 1);
//                }
                
                if (this.checkCollision(head)) {
                    gameover();
                    return;
                }
                
//                this.segments = head;
                
                console.log(`Before: ${this.segments.length}`);
//                New code ++
//                if(head.equal(apple.position)) {
//                    score++;
//                    apple.move();
//                } else {
//                    this.segments.pop();
//                }
                console.log(`After: ${this.segments.length}`);
                
            };
            
            //new code
            Snake.prototype.checkCollision = function(head) {
                
            };
            
            //New code ++
            var Lava = function() {
                this.blocks = [
                    new Block(27, 0),
                    new Block(27, 1),
                    new Block(27, 2),
                    new Block(27, 3),
                    new Block(27, 4),
                    new Block(27, 5),
                    new Block(27, 6),
                    new Block(28, 0),
                    new Block(28, 1),
                    new Block(28, 2),
                    new Block(28, 3),
                    new Block(28, 4),
                    new Block(28, 5),
                    new Block(28, 6),
                    new Block(29, 0),
                    new Block(29, 1),
                    new Block(29, 2),
                    new Block(29, 3),
                    new Block(29, 4),
                    new Block(29, 5),
                    new Block(29, 6),
                    new Block(30, 0),
                    new Block(30, 1),
                    new Block(30, 2),
                    new Block(30, 3),
                    new Block(30, 4),
                    new Block(30, 5),
                    new Block(30, 6),
                    new Block(31, 0),
                    new Block(31, 1),
                    new Block(31, 2),
                    new Block(31, 3),
                    new Block(31, 4),
                    new Block(31, 5),
                    new Block(31, 6),
                    new Block(32, 0),
                    new Block(32, 1),
                    new Block(32, 2),
                    new Block(32, 3),
                    new Block(32, 4),
                    new Block(32, 5),
                    new Block(32, 6),
                    new Block(33, 0),
                    new Block(33, 1),
                    new Block(33, 2),
                    new Block(33, 3),
                    new Block(33, 4),
                    new Block(33, 5),
                    new Block(33, 6),
                    new Block(34, 0),
                    new Block(34, 1),
                    new Block(34, 2),
                    new Block(34, 3),
                    new Block(34, 4),
                    new Block(34, 5),
                    new Block(34, 6),
                    new Block(35, 0),
                    new Block(35, 1),
                    new Block(35, 2),
                    new Block(35, 3),
                    new Block(35, 4),
                    new Block(35, 5),
                    new Block(35, 6),
                    new Block(36, 0),
                    new Block(36, 1),
                    new Block(36, 2),
                    new Block(36, 3),
                    new Block(36, 4),
                    new Block(36, 5),
                    new Block(36, 6),
                    new Block(37, 0),
                    new Block(37, 1),
                    new Block(37, 2),
                    new Block(37, 3),
                    new Block(37, 4),
                    new Block(37, 5),
                    new Block(37, 6),
                    new Block(38, 0),
                    new Block(38, 1),
                    new Block(38, 2),
                    new Block(38, 3),
                    new Block(38, 4),
                    new Block(38, 5),
                    new Block(38, 6),
                    new Block(39, 0),
                    new Block(39, 1),
                    new Block(39, 2),
                    new Block(39, 3),
                    new Block(39, 4),
                    new Block(39, 5),
                    new Block(39, 6),
                    new Block(40, 0),
                    new Block(40, 1),
                    new Block(40, 2),
                    new Block(40, 3),
                    new Block(40, 4),
                    new Block(40, 5),
                    new Block(40, 6),
                    new Block(41, 0),
                    new Block(41, 1),
                    new Block(41, 2),
                    new Block(41, 3),
                    new Block(41, 4),
                    new Block(41, 5),
                    new Block(41, 6)
                ];
            };
            
            var no_more = false;
            var no_more1 = false;
            var no_more2 = false;
            var no_more3 = false;
            var no_more4 = false;
            var no_more5 = false;
            var no_more6 = false;
            var no_more7 = false;
            var no_more8 = false;
            var no_more9 = false;
            var no_more10 = false;
            var no_more11 = false;
            var no_more12 = false;
            var no_more13 = false;
            var no_more14 = false;
            var no_more15 = false;
            var no_more16 = false;
            var no_more17 = false;
            var no_more18 = false;
            var no_more19 = false;
            var no_more20 = false;
            var no_more20 = false;
            var no_more21 = false;
            var no_more22 = false;
            var no_more23 = false;
            var no_more24 = false;
            var no_more25 = false;
            var no_more26 = false;
            var no_more27 = false;
            var no_more28 = false;
            var no_more29 = false;
            var no_more30 = false;
            var no_more31 = false;
            var no_more32 = false;
            var no_more33 = false;
            var no_more34 = false;
            var no_more35 = false;
            var no_more36 = false;
            var no_more37 = false;
            var no_more38 = false;
            var no_more39 = false;
            var no_more40 = false;
            
//            this.blocks2 = [];
//            this.blocks3 = [];
//            this.blocks4 = [];
//            this.blocks5 = [];
//            
//            for (i = 0; i < this.blocks.length; i++) {
//                this.blocks2[i] = this.blocks[i] + 16.4
//                this.blocks3[i] = this.blocks[i] + 16.4 * 2
//                this.blocks4[i] = this.blocks[i] + 16.4 * 3
//                this.blocks5[i] = this.blocks[i] + 16.4 * 4
//            }
            
            //New code++
            Lava.prototype.draw = function(num) {
                if (no_more != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            //New code ++
            
            Lava.prototype.draw1 = function(num) {
                if (no_more1 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more1 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw2 = function(num) {
                if (no_more2 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more2 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw3 = function(num) {
                if (no_more3 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more3 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw4 = function(num) {
                if (no_more4 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more4 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw5 = function(num) {
                if (no_more5 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more5 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw6 = function(num) {
                if (no_more6 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more6 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw7 = function(num) {
                if (no_more7 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more7 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw8 = function(num) {
                if (no_more8 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more8 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw9 = function(num) {
                if (no_more9 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more9 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw10 = function(num) {
                if (no_more10 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more10 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw11 = function(num) {
                if (no_more11 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more11 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw12 = function(num) {
                if (no_more12 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more12 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw13 = function(num) {
                if (no_more13 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more13 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw14 = function(num) {
                if (no_more14 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more14 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw15 = function(num) {
                if (no_more15 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more15 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw16 = function(num) {
                if (no_more16 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more16 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw17 = function(num) {
                if (no_more17 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more17 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw18 = function(num) {
                if (no_more18 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more18 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw19 = function(num) {
                if (no_more19 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more19 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw20 = function(num) {
                if (no_more20 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more20 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            Lava.prototype.draw21 = function(num) {
                if (no_more21 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more21 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw22 = function(num) {
                if (no_more22 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more22 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw23 = function(num) {
                if (no_more23 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more23 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw24 = function(num) {
                if (no_more24 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more24 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw25 = function(num) {
                if (no_more25 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more25 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw26 = function(num) {
                if (no_more26 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more26 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw27 = function(num) {
                if (no_more27 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more27 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw28 = function(num) {
                if (no_more28 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more28 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw29 = function(num) {
                if (no_more29 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more29 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw30 = function(num) {
                if (no_more30 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more30 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw31 = function(num) {
                if (no_more31 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more31 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw32 = function(num) {
                if (no_more32 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more32 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw33 = function(num) {
                if (no_more33 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more33 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw34 = function(num) {
                if (no_more34 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more34 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw35 = function(num) {
                if (no_more35 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more35 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw36 = function(num) {
                if (no_more36 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more36 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw37 = function(num) {
                if (no_more37 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more37 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw38 = function(num) {
                if (no_more38 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more38 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw39 = function(num) {
                if (no_more39 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more39 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            
            Lava.prototype.draw40 = function(num) {
                if (no_more40 != true) {
                    num = Math.floor(Math.random() * 5) * 16.4;
                    for (k = 0; k < this.blocks.length; k++) {
                        this.blocks[k] = new Block(num + this.blocks[k].col, this.blocks[k].row)
                        no_more40 = true;
                    }
                }
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i].drawSquare("Orange")
                } 
            };
            //New code ++
            Lava.prototype.move = function() {
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i] = new Block(this.blocks[i].col, this.blocks[i].row + 1);
                } 
            };
            
            Lava.prototype.move1 = function() {
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i] = new Block(this.blocks[i].col, this.blocks[i].row + 2);
                } 
            };
            
            Lava.prototype.move2 = function() {
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i] = new Block(this.blocks[i].col, this.blocks[i].row + 2);
                } 
            };
            
            Lava.prototype.move3 = function() {
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i] = new Block(this.blocks[i].col, this.blocks[i].row + 3);
                } 
            };
            
            Lava.prototype.move4 = function() {
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i] = new Block(this.blocks[i].col, this.blocks[i].row + 4);
                } 
            };
            
            Lava.prototype.move5 = function() {
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i] = new Block(this.blocks[i].col, this.blocks[i].row + 5);
                } 
            };
            
            Lava.prototype.move6 = function() {
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i] = new Block(this.blocks[i].col, this.blocks[i].row + 6);
                } 
            };
            
            Lava.prototype.move7 = function() {
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i] = new Block(this.blocks[i].col, this.blocks[i].row + 7);
                } 
            };
            
            Lava.prototype.move8 = function() {
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i] = new Block(this.blocks[i].col, this.blocks[i].row + 8);
                } 
            };
            
            Lava.prototype.move9 = function() {
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i] = new Block(this.blocks[i].col, this.blocks[i].row + 9);
                } 
            };
            
            Lava.prototype.move10 = function() {
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i] = new Block(this.blocks[i].col, this.blocks[i].row + 10);
                } 
            };
            
            Lava.prototype.move11 = function() {
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i] = new Block(this.blocks[i].col, this.blocks[i].row + 12);
                } 
            };
            
            Lava.prototype.move12 = function() {
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i] = new Block(this.blocks[i].col, this.blocks[i].row + 15);
                } 
            };
            
            Lava.prototype.move13 = function() {
                for (i = 0; i < this.blocks.length; i++) {
                    this.blocks[i] = new Block(this.blocks[i].col, this.blocks[i].row + 20);
                } 
            };
            
            
            //New code ++
            $("body").keydown(function (event) {
                console.log("hi");
                let dir = directions[event.keyCode];
                console.log(dir);
                if (dir == "right" || dir == "left") {
                    snake.move(dir);
                } 
                if (dir !== undefined) {
                    snake.setDirection(dir);
                   
                }
            });
            
            
            
            var snake = new Snake();
            var lava = new Lava();
            var lava1 = new Lava();
            var lava2 = new Lava();
            var lava3 = new Lava();
            var lava4 = new Lava();
            var lava5 = new Lava();
            var lava6 = new Lava();
            var lava7 = new Lava();
            var lava8 = new Lava();
            var lava9 = new Lava();
            var lava10 = new Lava();
            var lava11 = new Lava();
            var lava12 = new Lava();
            var lava13 = new Lava();
            var lava14 = new Lava();
            var lava15 = new Lava();
            var lava16 = new Lava();
            var lava17 = new Lava();
            var lava18 = new Lava();
            var lava19 = new Lava();
            var lava20 = new Lava();
            var lava21 = new Lava();
            var lava22 = new Lava();
            var lava23 = new Lava();
            var lava24 = new Lava();
            var lava25 = new Lava();
            var lava26 = new Lava();
            var lava27 = new Lava();
            var lava28 = new Lava();
            var lava29 = new Lava();
            var lava30 = new Lava();
            var lava31 = new Lava();
            var lava32 = new Lava();
            var lava33 = new Lava();
            var lava34 = new Lava();
            var lava35 = new Lava();
            var lava36 = new Lava();
            var lava37 = new Lava();
            var lava38 = new Lava();
            var lava39 = new Lava();
            var lava40 = new Lava();
            var x = 60000;
            var int = setInterval(function() {
                ctx.clearRect(0, 0, width, height);
                drawscore();
                snake.draw();
                lava.draw();
                lava.move();
                setTimeout(function() {
                    lava1.draw1();
                    lava1.move1();
                }, 3000);
                setTimeout(function() {
                    lava2.draw2();
                    lava2.move2();
                }, 6000);
                setTimeout(function() {
                    lava3.draw3();
                    lava3.move3();
                }, 9000);
                setTimeout(function() {
                    lava4.draw4();
                    lava4.move4();
                }, 12000);
                setTimeout(function() {
                    lava5.draw5();
                    lava5.move5();
                }, 15000);
                setTimeout(function() {
                    lava6.draw6();
                    lava6.move6();
                }, 18000);
                setTimeout(function() {
                    lava7.draw7();
                    lava7.move7();
                }, 21000);
                setTimeout(function() {
                    lava8.draw8();
                    lava8.move8();
                }, 24000);
                setTimeout(function() {
                    lava9.draw9();
                    lava9.move9();
                }, 27000);
                setTimeout(function() {
                    lava10.draw10();
                    lava10.move10();
                }, 30000);
                setTimeout(function() {
                    lava11.draw11();
                    lava11.move10();
                }, 33000);
                setTimeout(function() {
                    lava12.draw12();
                    lava12.move10();
                }, 36000);
                setTimeout(function() {
                    lava13.draw13();
                    lava13.move10();
                }, 39000);
                setTimeout(function() {
                    lava14.draw14();
                    lava14.move10();
                }, 42000);
                setTimeout(function() {
                    lava15.draw15();
                    lava15.move10();
                }, 45000);
                setTimeout(function() {
                    lava16.draw16();
                    lava16.move11();
                }, 48000);
                setTimeout(function() {
                    lava17.draw17();
                    lava17.move11();
                }, 51000);
                setTimeout(function() {
                    lava18.draw18();
                    lava18.move11();
                }, 54000);
                setTimeout(function() {
                    lava19.draw19();
                    lava19.move12();
                }, 57000);
                setTimeout(function() {
                    lava20.draw20();
                    lava20.move12();
                }, 60000);
                setTimeout(function() {
                    lava21.draw21();
                    lava21.move10();
                }, 3000 + x);
                setTimeout(function() {
                    lava22.draw22();
                    lava22.move10();
                }, 6000 + x);
                setTimeout(function() {
                    lava23.draw23();
                    lava23.move3();
                }, 9000 + x);
                setTimeout(function() {
                    lava24.draw24();
                    lava24.move4();
                }, 12000 + x);
                setTimeout(function() {
                    lava25.draw25();
                    lava25.move5();
                }, 15000 + x);
                setTimeout(function() {
                    lava26.draw26();
                    lava26.move6();
                }, 18000 + x);
                setTimeout(function() {
                    lava27.draw27();
                    lava27.move7();
                }, 21000 + x);
                setTimeout(function() {
                    lava28.draw28();
                    lava28.move8();
                }, 24000 + x);
                setTimeout(function() {
                    lava29.draw29();
                    lava29.move9();
                }, 27000 + x);
                setTimeout(function() {
                    lava30.draw30();
                    lava30.move10();
                }, 30000 + x);
                setTimeout(function() {
                    lava31.draw31();
                    lava31.move11();
                }, 33000 + x);
                setTimeout(function() {
                    lava32.draw32();
                    lava32.move11();
                }, 36000 + x);
                setTimeout(function() {
                    lava33.draw33();
                    lava33.move11();
                }, 39000 + x);
                setTimeout(function() {
                    lava34.draw34();
                    lava34.move11();
                }, 42000 + x);
                setTimeout(function() {
                    lava35.draw35();
                    lava35.move12();
                }, 45000 + x);
                setTimeout(function() {
                    lava36.draw36();
                    lava36.move12();
                }, 48000 + x);
                setTimeout(function() {
                    lava37.draw37();
                    lava37.move12();
                }, 51000 + x);
                setTimeout(function() {
                    lava38.draw38();
                    lava38.move13();
                }, 54000 + x);
                setTimeout(function() {
                    lava39.draw39();
                    lava39.move13();
                }, 57000 + x);
                setTimeout(function() {
                    lava40.draw40();
                    lava40.move13();
                }, 60000 + x);
                //new code ++
                drawBorder();
            }, 100);  
</script>
</body>
</html>
